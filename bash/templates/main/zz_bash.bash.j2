#-------------------------------------------------------------------------------
#                             ANSIBLE MANAGED FILE
#-------------------------------------------------------------------------------

#-------------------------------------------------------------------------------
# INFORMATION
#-------------------------------------------------------------------------------
#
# Name   : zz_bash.bash
# Type   : environment variable configuration file
# Role   : bash
#
# Authors: liv community
# License: Simplified BSD License
#
#-------------------------------------------------------------------------------

#-------------------------------------------------------------------------------
# SHELL OPTIONS
#-------------------------------------------------------------------------------

# checkwinsize
{% if (bash_checkwinsize|match('false|no|disable')) %}
shopt -d checkwinsize
{% else %}
shopt -s checkwinsize
{% endif %}

# histappend
{% if (bash_histappend|match('false|no|disable')) %}
shopt -d histappend
{% else %}
shopt -s histappend
{% endif %}

#-------------------------------------------------------------------------------
# SHELL VARIABLES
#-------------------------------------------------------------------------------

{% if not (bash_histcontrol|match('false|no|disable')) %}
# HISTCONTROL
HISTCONTROL='{{bash_histcontrol}}'
{% if not (bash_history_readonly|match('false|no|disable')) %}
readonly HISTCONTROL
{% endif %}
export HISTCONTROL
{% endif %}

{% if not (bash_histfilesize|match('false|no|disable')) %}
# HISTFILESIZE
HISTFILESIZE={{(bash_histfilesize|int)}}
{% if not (bash_history_readonly|match('false|no|disable')) %}
readonly HISTFILESIZE
{% endif %}
export HISTFILESIZE
{% endif %}

{% if not (bash_histignore|match('false|no|disable')) %}
# HISTIGNORE
HISTIGNORE='{{bash_histignore}}'
{% if not (bash_history_readonly|match('false|no|disable')) %}
readonly HISTIGNORE
{% endif %}
export HISTIGNORE
{% endif %}

{% if not (bash_histsize|match('false|no|disable')) %}
# HISTSIZE
HISTSIZE={{(bash_histsize|int)}}
{% if not (bash_history_readonly|match('false|no|disable')) %}
readonly HISTSIZE
{% endif %}
export HISTSIZE
{% endif %}

{% if not (bash_histtimeformat|match('false|no|disable')) %}
# HISTTIMEFORMAT
HISTTIMEFORMAT='{{bash_histtimeformat}}'
{% endif %}

{% if not (bash_prompt_command|match('false|no|disable')) %}
# PROMPT_COMMAND
PROMPT_COMMAND='{{bash_prompt_command}}'
{% if not (bash_history_readonly|match('false|no|disable')) %}
readonly PROMPT_COMMAND
{% endif %}
export PROMPT_COMMAND
{% endif %}

{% if not (bash_tmout|match('false|no|disable')) %}
# TMOUT
TMOUT={{(bash_tmout|int)}}
{% if not (bash_tmout_readonly|match('false|no|disable')) %}
readonly TMOUT
{% endif %}
export TMOUT
{% endif %}

#-------------------------------------------------------------------------------
# KEY BINDINGS
#-------------------------------------------------------------------------------

if [[ $- =~ i ]]; then
  bind '"\e[1~": beginning-of-line'
  bind '"\e[4~": end-of-line'
fi
